The previous algorithm builds up a bisimulation and checks in every step whether
the current constraint is contained in the bisimulation.
As mentioned before, a bisimulation up-to $f$ can speed up the algorithm
because thanks to the function $f$ the bisimulation yields more information.
In the following, the requirements and some examples for this function $f$ are demonstrated.

\begin{definition}
    A relation $R$ \textit{progresses} to a relation $R'$
    (both being relations between states of an automaton $M$)
    if for every pair $(p, q)$ in $R$, the following conditions are valid:

    \begin{itemize}
        \item $o(p) = o(q)$ and
        \item $\forall a \in \Sigma_M: t_a(p) R t_{q}$
    \end{itemize}

    The symbol $\rightarrowtail$ is used to denote progression.
\end{definition}

\begin{example}
    Any relation $R$ for which $R \rightarrowtail R$ is a bisimulation.
\end{example}

\begin{definition}
    A function $f$ over relations of states is compatible if it is monotone and if
    preserves progressions, i.e., $R \rightarrowtail R' \Rightarrow f(R) \rightarrowtail f(R')$.
\end{definition}

A simple optimization to the algorithm from the previous subsection is
to check membership in a bisimulation up-to equivalence.
This can be efficiently done by using a union-find data structure, which
is actually the algorithm originally devised by Hopcroft and Karp.
This illustrates the power of the bisimulation up-to approach because
using a carefully designed data structure that allows for fast membership check
an algorithm can avoid a lot of redundant computations.

\todo{show that the equivalence closure is compatible}

To use the above algorithm with NFAs, the determinised NFA can be used.
At first sight this makes matters complicated because now sets of states
have to be compared, but it opens up another possibility of optimization
that is based on a simple observation:
for every pair of sets of states $X$ and $Y$,
the language of the union of $X$ and $Y$ is equal to
the union of the languages of $X$ and $Y$.
The main advantage of this observation is that it is not necessary anymore
to visit large parts of the determinised NFA.

